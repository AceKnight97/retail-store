(this["webpackJsonpretail-store"]=this["webpackJsonpretail-store"]||[]).push([[0],{204:function(e,a,t){},212:function(e,a,t){},23:function(e,a,t){"use strict";(function(e){var t=e.window.localStorage,n={login:function(e){console.log("login data: ",e);var a=e.user,n=e.isSuccess,r=e.token;t.isSuccess=n,t.token=r,t.user=JSON.stringify(a),t.role=a.role},getRole:function(){return t.role},setMenu:function(e){t.menu=JSON.stringify(e)},getMenu:function(){return t.menu&&"undefined"!==t.menu?JSON.parse(t.menu):[]},setKindOfFood:function(e){t.kindOfFood=JSON.stringify(e)},getKindOfFood:function(){return t.kindOfFood&&"undefined"!==t.kindOfFood?JSON.parse(t.kindOfFood):[]},getToken:function(){return t.token},setFoodData:function(e){t.foodData=JSON.stringify(e)},getFoodData:function(){return t.foodData&&"undefined"!==t.foodData?JSON.parse(t.foodData):[]},setMasterData:function(e){t.masterData=JSON.stringify(e)},getMasterData:function(){return t.masterData&&"undefined"!==t.masterData?JSON.parse(t.masterData):[]},setDatalogin:function(e){t.login=JSON.stringify(e)},getDataLogin:function(){return t.login&&"undefined"!==t.login?JSON.parse(t.login):{}},isSuccess:function(){return t.isSuccess},userId:function(){return t.userId},username:function(){return t.userName},role:function(){return t.role},logout:function(){t.clear()}};a.a=n}).call(this,t(84))},298:function(e,a,t){},309:function(e,a,t){},310:function(e,a,t){},311:function(e,a,t){},312:function(e,a,t){},313:function(e,a,t){},314:function(e,a,t){},315:function(e,a,t){},316:function(e,a,t){},317:function(e,a,t){},318:function(e,a,t){},319:function(e,a,t){},320:function(e,a,t){},321:function(e,a,t){},322:function(e,a,t){},323:function(e,a,t){},324:function(e,a,t){},325:function(e,a,t){},326:function(e,a,t){},327:function(e,a,t){},329:function(e,a,t){},330:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t(34),s=t.n(r),c=t(66),i=t(175),o=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,339)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,s=a.getLCP,c=a.getTTFB;t(e),n(e),r(e),s(e),c(e)}))},l=t(14),d=t(15),u=t(19),m=t(20),j=t(65),f=t(39),b=t(6),h=t(5),p=t.n(h),v=t(17),O=t.n(v),x=(t(204),t(3)),g=function(e){var a=Object(n.useState)(e),t=Object(b.a)(a,2),r=t[0],s=t[1];return[r,function(e){return s((function(a){var t=O.a.assign(a,e);return Object(x.a)({},t)}))}]},N=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,r=Object(n.useRef)(!0);Object(n.useEffect)((function(){return r.current?r.current=!1:e(),t}),a)},y=t.p+"static/media/bosch-logo-new-flat.e412f7ba.png",C=t(81),w=t(1),k=function(e){var a=Object(f.h)(),t=Object(f.g)(),r=a.pathname,s=g({}),c=Object(b.a)(s,2),i=(c[0],c[1],e.className);Object(n.useEffect)((function(){}),[]);var o=function(e){t.push("/retail-store")};return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:p()("supergraphic",i)}),Object(w.jsxs)("div",{className:"bosch-header",children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("img",{src:y,alt:"Bosch ic",className:"bosch-header-logo"}),function(){var e="";switch(r){case"/food-order":e="Food Order";break;case"/history":e="Order History";break;case"/user":e="User"}return Object(w.jsxs)("div",{className:"bosch-header-title",children:[Object(w.jsx)(j.b,{to:"/retail-store",onClick:o,children:"Home"}),e?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(C.a,{}),Object(w.jsx)("span",{children:e})]}):null]})}()]}),Object(w.jsx)("div",{className:"bosch-header-group",children:"Canteen - Group 4"})]}),"/retail-store"!==r&&Object(w.jsx)(j.b,{to:"/retail-store",className:"not-home-back-btn",children:"Go back"})]})};k.defaultProps={className:""};var E=k,D={LOGIN_REQUEST:"LOGIN_REQUEST",LOGIN_COMPLETE:"LOGIN_COMPLETE",GET_ALL_DATA_REQUEST:"GET_ALL_DATA_REQUEST",GET_ALL_DATA_COMPLETE:"GET_ALL_DATA_COMPLETE",RELOAD_PAGE_REQUEST:"RELOAD_PAGE_REQUEST",LOGOUT_REQUEST:"LOGOUT_REQUEST",LOGOUT_COMPLETE:"LOGOUT_COMPLETE"},S="http://localhost:8080";var T=t(18),P=t(4),F=t(8),R=t.n(F),L=t(47),I=t(23);t(212);var M=t(334),A=t(59),q=function(e){var a;return Object(w.jsxs)("div",{className:p()("modal-header-wrapper",e.className),children:[Object(w.jsx)("div",{className:"modal-header-title",children:Object(w.jsx)("span",{children:e.title})}),Object(w.jsx)(L.a,(a={ghost:!0,onClick:e.onClick,className:e.btnClassName,disabled:e.loading},Object(P.a)(a,"className","modal-header-close-btn"),Object(P.a)(a,"children",e.btnTitle||Object(w.jsx)(A.a,{})),a))]})};q.defaultProps={className:void 0,btnClassName:void 0,btnTitle:"",loading:!1,onClick:function(){}};var U=q,B=function(e){return Object(w.jsxs)("div",{className:p()("modal-footer-wrapper",e.className),children:[e.dangerTitle?Object(w.jsx)(L.a,{danger:!0,className:e.dangerTitle,onClick:e.onClickDanger,disabled:e.loading,children:e.dangerTitle}):Object(w.jsx)("div",{}),Object(w.jsxs)("div",{className:"modal-footer-buttons",children:[Object(w.jsx)(L.a,{className:e.leftBtnClassName,onClick:e.onClickLeftBtn,disabled:e.loading,children:e.leftTitle}),Object(w.jsx)(L.a,{type:"primary",onClick:e.onClickRightBtn,disabled:e.disabled,loading:e.loading,children:e.rightTitle})]})]})};B.defaultProps={className:void 0,disabled:!1,loading:!1,leftBtnClassName:"mr8",dangerTitle:"",onClickDanger:function(){}};var H=B,G=t(182),K=t(336),V=t(189),Y=t(177),Q=function(e){var a=e.className,t=e.title;return t?Object(w.jsx)("div",{className:p()("input-title-wrapper",a),children:Object(w.jsx)("span",{children:t})}):null};Q.defaultProps={className:"",title:""};var J=Q,W=t(331),Z=t(153),X=t(29),z=t.n(X),$=function(e){var a,t=e.className,n=e.title,r=e.placeholder,s=e.format,c=e.value,i=e.name,o=e.suffixIcon,l=e.type,d=e.disabledDate,u=e.disabled,m=function(a){e.onChange(i,a)};switch(d){case"PAST":a=function(e){return e>z()().endOf("day")};break;case"FUTURE":a=function(e){return e<=z()().endOf("day")}}return Object(w.jsxs)("div",{className:p()("datepicker-ct-wrapper",t),children:[Object(w.jsx)(J,{title:n}),"TIME"===l?Object(w.jsx)(W.a,{disabled:u,getPopupContainer:function(e){return e.parentElement},suffixIcon:o,placeholder:r,onChange:m,format:s,value:"string"===typeof c&&z()(c).isValid()?z()(c):c||void 0,disabledDate:a}):Object(w.jsx)(Z.a,{disabled:u,getPopupContainer:function(e){return e.parentElement},suffixIcon:o,placeholder:r,onChange:m,format:s,value:"string"===typeof c&&z()(c).isValid()?z()(c):c||void 0,disabledDate:a})]})};$.defaultProps={className:void 0,format:"MM/DD/YYYY",title:"",placeholder:"Select date",onChange:function(){},value:void 0,name:"",disabledDate:void 0,suffixIcon:void 0,type:"DATE",disabled:!1};var ee=$,ae=function(e){var a=e.className,t=e.type,n=e.rows,r=e.placeholder,s=e.title,c=e.disabled,i=e.value,o=e.inputClassName,l=e.maxLength,d=e.prefix,u=e.mask,m=e.format,j=e.decimalScale,f=e.name,b=(e.allowedDecimalSeparators,e.allowLeadingZeros,e.thousandSeparator,e.data,e.mode,e.unitValue,e.onChangeUnit,e.disabledDate),h=e.suffix,v=e.autoComplete,O=(e.supName,e.errMes),x=e.errMesClassName,g=e.absSuffix,N=e.allowNegative,y=(e.isValueOutside,e.isSearchable,e.loadOptions,e.options,e.clearOptions,e.onInputChange,e.titleClassName),C=function(a){e.onChange(f,a.target.value)};return Object(w.jsxs)("div",{className:p()("input-ct-wrapper",a),children:[Object(w.jsx)(J,{title:s,className:y}),"TEXTAREA"===t?Object(w.jsx)(G.a.TextArea,{value:i,disabled:c,placeholder:r,rows:n,onChange:C}):null,"NUMBER"===t?Object(w.jsx)(Y.a,{mask:u,format:m,value:i,className:p()("basic-number-format",o,O?"err-border":""),disabled:c,onValueChange:function(a){var t=a.value;e.onChange(f,t)},placeholder:r,maxLength:l,decimalScale:j,prefix:d,suffix:h,allowNegative:N}):null,"DATE"===t?Object(w.jsx)(ee,{name:f,placeholder:r,value:i,onChange:e.onChange,disabledDate:b,suffixIcon:h}):null,"text"===t?Object(w.jsx)(G.a,{className:O?"err-border":"",value:i,disabled:c,placeholder:r,onChange:C,prefix:d,suffix:h}):null,"PASSWORD"===t?Object(w.jsx)(G.a.Password,{className:O?"err-border":"",value:i,disabled:c,placeholder:r,onChange:C,iconRender:function(e){return e?Object(w.jsx)(K.a,{}):Object(w.jsx)(V.a,{})},autoComplete:v}):null,O?Object(w.jsx)("div",{className:p()("div-incorrect-mes",x),children:Object(w.jsx)("span",{children:O})}):null,g&&Object(w.jsx)("div",{className:"abs-suffix-ct",children:Object(w.jsx)("span",{children:g})})]})};ae.defaultProps={className:void 0,titleClassName:"",rows:4,type:"text",title:"",placeholder:"Enter...",onChange:function(){},onChangeUnit:function(){},disabled:!1,value:void 0,inputClassName:"",maxLength:20,allowedDecimalSeparators:void 0,decimalScale:void 0,allowLeadingZeros:!1,thousandSeparator:!1,prefix:void 0,suffix:void 0,mask:void 0,format:void 0,name:"",supName:"",data:[],mode:void 0,unitValue:"",disabledDate:void 0,autoComplete:"",errMes:"",errMesClassName:"",absSuffix:"",allowNegative:!1,isValueOutside:!1,isSearchable:!1,loadOptions:function(){},options:[],clearOptions:function(){},onInputChange:function(){}};var te=ae,ne=t(43),re=t.n(ne),se=function(){var e=Object(T.a)(R.a.mark((function e(a){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.a.post("".concat(S,"/api/public/login"),a);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),ce=se,ie=(t(7),t(188),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(String(e.trim()).toLowerCase())}),oe=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n,r=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:{},t=a.email,n=a.password,e.next=4,ce({email:t,password:n});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.email,t=e.password;return ie(a)?t.length<6?{passwordErr:"Incorrect password"}:{isSuccess:!0}:{emailErr:"Incorrect email"}},de=function(e){var a=g({email:"",password:"",emailErr:"",passwordErr:"",loading:!1}),t=Object(b.a)(a,2),r=t[0],s=t[1],c=e.className,i=e.visible,o=e.onClickCancel,l=r.email,d=r.password,u=r.emailErr,m=r.passwordErr,j=r.loading;Object(n.useEffect)((function(){}),[]);var f=function(e,a){var t;s((t={},Object(P.a)(t,e,a),Object(P.a)(t,"emailErr",""),Object(P.a)(t,"passwordErr",""),t))},h=function(){var a=Object(T.a)(R.a.mark((function a(){var t,n;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t=le(r)).isSuccess){a.next=10;break}return s({loading:!0}),a.next=5,oe(r);case 5:(n=a.sent).isSuccess?(I.a.setDatalogin(n.data.user),e.loginRequest(n.data),o()):alert("Login failed "+n.message),s({loading:!1}),a.next=11;break;case 10:s(t);case 11:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(w.jsx)(M.a,{className:"login-modal",destroyOnClose:!0,visible:i,footer:null,closable:!1,centered:!0,children:Object(w.jsxs)("div",{className:p()("stop-health-care-modal-wrapper",c),children:[Object(w.jsx)(U,{title:"Login",onClick:o}),Object(w.jsxs)("div",{className:"login-modal-main",children:[Object(w.jsx)(te,{title:"Email",name:"email",value:l,onChange:f,placeholder:"Enter your email",errMes:u}),Object(w.jsx)(te,{title:"Password",name:"password",value:d,onChange:f,placeholder:"Enter your email",type:"PASSWORD",className:"mt-16",errMes:m})]}),Object(w.jsx)(H,{disabled:!l||!d,leftTitle:"Cancel",rightTitle:"Login",onClickLeftBtn:o,onClickRightBtn:h,loading:j})]})})};de.defaultProps={className:"",visible:!1,onClickCancel:function(){},loginRequest:function(){}};var ue=de,me=t(69),je=t.n(me),fe=function(){var e=Object(T.a)(R.a.mark((function e(a){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.a.post("".concat(S,"/api/user/createuser"),a);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),be=fe,he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.email,t=e.password,n=e.confirmPassword,r=(e.username,e.phone),s=(e.address,e.notes,e.loading,e.isStep1);return s?t.length<6?{passwordErr:"Password must have 6 or more characters"}:t!==n?{confirmPasswordErr:"Confirm password is not match"}:ie(a)?{isStep1:!1}:{emailErr:"Incorrect email format"}:r.length<9?{}:{finish:!0}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.email,t=e.password,n=e.confirmPassword,r=e.username,s=e.phone,c=e.address,i=e.notes,o=(e.loading,e.isStep1);if(o){if(!a||!t||!n)return!0}else if(!r||!s||!c||!i)return!0;return!1},ve=function(){var e=Object(T.a)(R.a.mark((function e(a){var t,n,r,s,c,i,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log({data:a}),t=a.email,n=a.username,r=a.password,s=a.phone,c=a.address,i=a.notes,e.next=4,be({email:t,username:n,password:r,phone:s,address:c,notes:i});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Oe={email:"",password:"",confirmPassword:"",username:"",phone:"",address:"",notes:"",emailErr:"",passwordErr:"",confirmPasswordErr:"",usernameErr:"",phoneErr:"",addressErr:"",notesErr:"",loading:!1,isStep1:!0},xe=function(e){var a=g(Object(x.a)({},Oe)),t=Object(b.a)(a,2),r=t[0],s=t[1],c=e.className,i=e.visible,o=e.onClickCancel,l=r.email,d=r.password,u=r.confirmPassword,m=r.username,j=r.phone,f=r.address,h=(r.notes,r.emailErr),v=r.passwordErr,N=r.confirmPasswordErr,y=r.usernameErr,C=r.phoneErr,k=r.addressErr,E=(r.notesErr,r.loading),D=r.isStep1;Object(n.useEffect)((function(){i||s(Object(x.a)({},Oe))}),[i]);var S=function(e,a){var t=Object(P.a)({},e,a);D?(O.a.assign(t,{emailErr:"",passwordErr:"",confirmPasswordErr:""}),s(t)):(O.a.assign(t,{usernameErr:"",phoneErr:"",addressErr:"",notesErr:""}),s(t))},F=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=he(r)).finish){e.next=12;break}return t={loading:!1},s({loading:!0}),e.next=6,ve(r);case 6:n=e.sent,console.log({resFinish:n}),n.isSuccess?(alert("Successfully creating user!"),o()):alert("Failed to create user: "+n.message),s(t),e.next=13;break;case 12:s(a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)(M.a,{className:"register-modal",destroyOnClose:!0,visible:i,footer:null,closable:!1,centered:!0,children:Object(w.jsxs)("div",{className:p()("register-modal-wrapper",c),children:[Object(w.jsx)(U,{title:"Register step ".concat(D?"1":"2","/2"),onClick:o}),Object(w.jsx)("div",{className:"register-modal-main",children:D?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(te,{title:"Email",name:"email",value:l,onChange:S,placeholder:"Enter your email",errMes:h}),Object(w.jsx)(te,{title:"Password",name:"password",value:d,onChange:S,placeholder:"Enter your email",type:"PASSWORD",className:"mt-16",errMes:v}),Object(w.jsx)(te,{title:"Confirm password",name:"confirmPassword",value:u,onChange:S,placeholder:"Enter your confirm password",type:"PASSWORD",className:"mt-16",errMes:N})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(te,{title:"Username",name:"username",value:m,onChange:S,placeholder:"Enter your username",errMes:y}),Object(w.jsx)(te,{title:"Phone number",name:"phone",value:j,onChange:S,placeholder:"Enter your phone number",className:"mt-16",type:"NUMBER",errMes:C}),Object(w.jsx)(te,{title:"Address",name:"address",value:f,onChange:S,placeholder:"Enter your address",className:"mt-16",errMes:k})]})}),Object(w.jsx)(H,{disabled:pe(r),leftTitle:D?"Cancel":"Back to step 1",rightTitle:D?"Next":"Finish",onClickLeftBtn:D?o:function(){s({isStep1:!0})},onClickRightBtn:F,loading:E})]})})};xe.defaultProps={className:"",visible:!1,onClickCancel:function(){}};var ge=xe,Ne=function(e){var a=Object(f.g)(),t=Object(f.h)(),r=g({visibleLogin:!1,visibleRegister:!1}),s=Object(b.a)(r,2),c=s[0],i=s[1],o=e.className,l=c.visibleLogin,d=c.visibleRegister,u=function(){i({visibleLogin:!l})},m=function(){i({visibleRegister:!d})},j=I.a.getDataLogin(),h=j.isVerify,v=void 0===h||h,x=j.username;return Object(n.useEffect)((function(){O.a.isEmpty(e.login)&&O.a.isEmpty(I.a.getDataLogin())&&(console.log("No current user"),i({}))}),[e.login]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:p()("home-header",o),children:Object(w.jsx)("div",{className:"home-header-btns",children:x?Object(w.jsxs)(w.Fragment,{children:[!v&&Object(w.jsx)(L.a,{type:"link",onClick:function(){},className:"home-header-active-account-btn",children:"Activate account"}),Object(w.jsx)(L.a,{type:"link",onClick:function(){"/user"!==t.pathname&&a.push("/user")},className:"home-header-username-btn",children:x}),Object(w.jsx)(L.a,{type:"link",onClick:function(){"/history"!==t.pathname&&a.push("/history")},className:"home-header-username-btn",children:"History"}),Object(w.jsx)(L.a,{type:"link",onClick:function(){I.a.logout(),e.logoutRequest(),a.push("/retail-store"),i({})},className:"home-header-logout-btn",children:"Logout"})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(L.a,{type:"link",onClick:u,className:"home-header-login-btn",children:"Login"}),Object(w.jsx)(L.a,{type:"link",onClick:m,className:"home-header-register-btn",children:"Register"})]})})}),Object(w.jsx)(ue,{visible:l,onClickCancel:u,loginRequest:e.loginRequest}),Object(w.jsx)(ge,{visible:d,onClickCancel:m})]})};Ne.defaultProps={className:""};var ye={loginRequest:function(e){return{type:D.LOGIN_REQUEST,data:e}},logoutRequest:function(e){return{type:D.LOGOUT_REQUEST,data:e}}},Ce=Object(c.b)((function(e){return{login:e.login}}),ye)(Ne),we=t(332),ke=(t(298),function(e){Object(n.useEffect)((function(){}),[]);var a=e.loading,t=e.columns,r=e.className,s=e.rowKey,c=(e.name,e.totalData),i=e.onRowClick;return Object(w.jsx)(we.a,{rowKey:s,className:p()(r,"antd-table"),dataSource:c,onRow:function(e,a){return{onClick:function(t){i(a,e)}}},pagination:!1,columns:t,loading:a})});ke.defaultProps={name:"",className:void 0,onRowClick:function(){},shouldHideNextButton:!1,fetchData:function(){},loading:!1,sorter:{},shouldShowAllData:!1,handleChangePage:function(){},isNoPagination:!1,page:1,sticky:!1};var Ee=ke,De=function(){var e=Object(T.a)(R.a.mark((function e(a){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.a.post("".concat(S,"/api/foodorder/createanycustomerorder"),a);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),Se=De,Te=function(){var e=Object(T.a)(R.a.mark((function e(a){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.a.post("".concat(S,"/api/foodorder/createorder"),a);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),Pe=Te,Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=[],t=1;return _.forEach(e,(function(e){_.forEach(e.data||[],(function(e){e.isBuy&&(a.push(Object(x.a)(Object(x.a)({},e),{},{index:t})),t+=1)}))})),a},Re=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n,r,s=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>0&&void 0!==s[0]?s[0]:[],t=s.length>1&&void 0!==s[1]?s[1]:"",n=s.length>2&&void 0!==s[2]?s[2]:"",r=a.map((function(e){return{food_id:e.id,quantity:parseFloat(e.quantity.slice(0,3)),email:t,notes:n,status:"Pending"}})),e.next=6,Pe(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n,r,s,c,i,o,l,d=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>0&&void 0!==d[0]?d[0]:[],t=d.length>1&&void 0!==d[1]?d[1]:{},n=t.email,r=t.username,s=t.address,c=t.phone,i=t.notes,o=a.map((function(e){return{food_id:e.id,quantity:parseFloat(e.quantity.slice(0,3)),email:n,notes:i,status:"Pending"}})),l={food:o,customer:{email:n,username:r,address:s,phone:c,password:c}},console.log({foodData:a,anyCustomerData:t,sendingData:l}),e.next=9,Se(l);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie="WEIGHT",Me="PACKAGE",_e=["0.5 Kg","1.0 Kg","1.5 Kg","2.0 Kg","2.5 Kg","3.0 Kg","3.5 Kg","4.0 Kg"],Ae=["1 pc","2 pcs","3 psc","4 psc"],qe=["Kg","Package/Dish"],Ue=["Pending","On Going","Done","Cancel"],Be=[0,1e5,2e5,5e5,1e6,2e6,5e6],He=function(){var e=Object(T.a)(R.a.mark((function e(){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.a.get("".concat(S,"/api/canteen/menu"));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ge=He,Ke=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ge();case 3:return a=e.sent,I.a.setMenu(a),t=[],n=[],r=O.a.groupBy(a,(function(e){return e.title})),Object.keys(r).forEach((function(e){t.push(e),n.push({title:e,data:r[e]})})),I.a.setKindOfFood(t),e.abrupt("return",n);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=0,t=[];return O.a.forEach(e,(function(e){a+=O.a.sumBy(e.data,(function(e){if(e.isBuy){if(e.quantityType===Ie){var a=e.quantity.slice(0,3);return t.push("".concat(e.name," (").concat(e.price," * ").concat(a,")")),parseFloat(a)*e.price}var n=e.quantity.slice(0,1);return t.push("".concat(e.name," (").concat(e.price," * ").concat(n,")")),parseInt(n,10)*e.price}return 0}))})),{total:a,cartTags:t}},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=e.searchName,n=e.rating,r=e.kind,s=e.minPrice,c=e.maxPrice;console.log({searchName:t,rating:n,kind:r,minPrice:s,maxPrice:c});var i=O.a.cloneDeep(a);return O.a.forEach(i,(function(e){e.data=O.a.filter(e.data,(function(e){var a,i=!0;(r&&(i=e.title===r),O.a.isNil(n)||O.a.isNil(e.rating)||(i=i&&e.rating>=n),t)&&(i=i&&(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase())));return O.a.isNil(s)||(i=i&&e.price>=s),O.a.isNil(c)||(i=i&&e.price<=c),i}))})),i},Qe=t(181),Je=t.n(Qe),We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"VND",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Price:",n="";if("VND"===a)n=Je.a.format(e,{code:"VND"});return"".concat(t," ").concat(n)},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=0;return _.forEach(e,(function(e){a+=e.price*e.quantity})),We(a,void 0,"")},Xe=(t(309),{email:"",username:"",phone:"",address:"",notes:"",emailErr:"",usernameErr:"",phoneErr:"",addressErr:"",loading:!1,isConfirm:!1}),ze=function(e){var a=g(Object(x.a)({},Xe)),t=Object(b.a)(a,2),r=t[0],s=t[1];Object(n.useEffect)((function(){i||s(Object(x.a)({},Xe))}),[e.visible]);var c=e.className,i=e.visible,o=e.onClickCancel,l=e.onClick,d=r.email,u=r.username,m=r.emailErr,j=r.usernameErr,f=r.loading,h=r.phone,v=r.address,O=r.notes,N=r.phoneErr,y=r.addressErr,C=r.isConfirm,k=function(e,a){var t;s((t={},Object(P.a)(t,e,a),Object(P.a)(t,"emailErr",""),Object(P.a)(t,"usernameErr",""),t))},E=function(){var e=Object(T.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C?l(r):s({isConfirm:!0});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(T.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({isConfirm:!1});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)(M.a,{className:"any-customer-modal",destroyOnClose:!0,visible:i,footer:null,closable:!1,centered:!0,children:Object(w.jsxs)("div",{className:p()("any-customer-modal-wrapper",c),children:[Object(w.jsx)(U,{title:"Customer info",onClick:o}),C?Object(w.jsxs)("div",{className:"any-customer-modal-main",children:[Object(w.jsx)("div",{className:"font-20 b",children:"Your information:"}),Object(w.jsxs)("div",{className:"fr-sb mt-16",children:[Object(w.jsx)("span",{className:"b",children:"Email:"}),Object(w.jsx)("span",{className:"ml-4",children:d})]}),Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsx)("span",{className:"b",children:"Username:"}),Object(w.jsx)("span",{className:"ml-4",children:u})]}),Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsx)("span",{className:"b",children:"Delivery:"}),Object(w.jsx)("span",{className:"ml-4",children:v})]}),Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsx)("span",{className:"b",children:"Phone number:"}),Object(w.jsx)("span",{className:"ml-4",children:h})]}),Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsx)("span",{className:"b",children:"Notes:"}),Object(w.jsx)("span",{className:"ml-4",children:O})]}),Object(w.jsx)("div",{className:"fcen mt-16 b",children:"Do you want to order now?"})]}):Object(w.jsxs)("div",{className:"any-customer-modal-main",children:[Object(w.jsx)(te,{title:"Email",name:"email",value:d,onChange:k,placeholder:"Enter your email",errMes:m}),Object(w.jsx)(te,{title:"Username",name:"username",value:u,onChange:k,placeholder:"Enter your username",className:"mt-16",errMes:j}),Object(w.jsx)(te,{title:"Address",name:"address",value:v,onChange:k,placeholder:"Enter your address",className:"mt-16",errMes:y}),Object(w.jsx)(te,{title:"Phone number",name:"phone",value:h,onChange:k,placeholder:"Enter your phone number",className:"mt-16",errMes:N,type:"NUMBER"}),Object(w.jsx)(te,{title:"Notes",name:"notes",value:O,onChange:k,placeholder:"Enter your notes",className:"mt-16",type:"TEXTAREA"})]}),Object(w.jsx)(H,{disabled:!d||!u||!v||!h,leftTitle:C?"Back":"Cancel",rightTitle:C?"Yes":"Order",onClickLeftBtn:C?D:o,onClickRightBtn:E,loading:f})]})})};ze.defaultProps={className:void 0,visible:!1,onClickCancel:function(){},onClick:function(){}};var $e=ze,ea=function(e){var a=Object(f.h)(),t=Object(f.g)(),r=g({foodData:Fe(a.state),anyCustomerVisible:!1,notes:""}),s=Object(b.a)(r,2),c=s[0],i=s[1],o=e.className,l=c.foodData,d=c.anyCustomerVisible,u=c.notes;Object(n.useEffect)((function(){}),[]);var m=Ve(a.state).total,j=I.a.getDataLogin(),h=j.address,v=j.phone,x=j.email,N=function(){var e=Object(T.a)(R.a.mark((function e(){var a,n,r,s=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>0&&void 0!==s[0]?s[0]:{},i({loading:!0}),e.next=4,Le(l,a);case 4:n=e.sent,r={loading:!1},n.isSuccess?(alert("Successfully creating order!"),I.a.setFoodData(void 0),O.a.assign(r,{anyCustomerVisible:!1}),setTimeout((function(){t.push("/retail-store")}),300)):alert("Failed to create order: ",n.message),i(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(T.a)(R.a.mark((function e(){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&v&&x){e.next=3;break}return i({anyCustomerVisible:!0}),e.abrupt("return");case 3:return i({loading:!0}),e.next=6,Re(l,x,u);case 6:(a=e.sent).isSuccess?(alert("Successfully creating order!"),I.a.setFoodData(void 0),t.push("/retail-store")):alert("Failed to create order: ",a.message),i({loading:!1});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:p()("food-order",o),children:[Object(w.jsx)(Ce,{}),Object(w.jsxs)("div",{className:"food-order-body",children:[Object(w.jsxs)("div",{className:"food-order-body-toper",children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b",children:"Payment Options:"}),Object(w.jsx)("span",{className:"ml-4",children:"Cash - When receiving"})]}),Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b",children:"Total:"}),Object(w.jsx)("span",{className:"ml-4",children:We(m,void 0,"")})]})]}),Object(w.jsxs)("div",{className:"food-order-body-toper",children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b",children:"Delivery:"}),Object(w.jsx)("span",{className:"ml-4",children:h})]}),Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b",children:"Contact at:"}),Object(w.jsx)("span",{className:"ml-4",children:v})]})]}),x&&Object(w.jsx)(te,{titleClassName:"b",title:"Notes",name:"notes",value:u,onChange:function(e,a){i(Object(P.a)({},e,a))},placeholder:"Enter your notes",className:"mt-16",type:"TEXTAREA"}),Object(w.jsxs)("div",{className:"food-order-body-btns",children:[Object(w.jsx)(L.a,{onClick:function(){t.push("/retail-store")},children:"Back"}),Object(w.jsx)(L.a,{type:"primary",onClick:y,children:"Confirm"})]}),Object(w.jsx)(Ee,{className:"mt-48",rowKey:"id",totalData:l,columns:[{title:"No.",dataIndex:"index"},{title:"Name",dataIndex:"name"},{title:"Price",dataIndex:"price",render:function(e){return We(e,void 0,"")}},{title:"Quantity",dataIndex:"quantity"}]})]}),Object(w.jsx)($e,{visible:d,onClickCancel:function(){i({anyCustomerVisible:!d})},onClick:N})]})};ea.defaultProps={className:""};var aa=ea,ta=t(187),na=(t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t(310),t.p+"static/media/star.4cc7b7cd.svg"),ra=t.p+"static/media/star-inactive.7f719452.svg",sa=t(106),ca=(t(311),sa.a.Option),ia=function(e){var a=Object(n.useRef)(void 0),t=e.className,r=e.placeholder,s=e.data,c=e.title,i=e.showSearch,o=e.defaultValue,l=e.isValueOutside,d=e.value,u=e.mode,m=e.suffixIcon,j=e.name,f=e.disabled,b=e.isObject;return Object(w.jsxs)("div",{className:p()("select-ct-wrapper",t),children:[Object(w.jsx)(J,{title:c}),Object(w.jsx)(sa.a,{getPopupContainer:function(e){return e.parentElement},disabled:f,ref:a,suffixIcon:m,mode:u,defaultValue:o,value:l?[]:b?(null===d||void 0===d?void 0:d.label)||void 0:d,showSearch:i,placeholder:r,optionFilterProp:"children",onChange:function(t){e.onChange(j,t),a.current.blur()},onSearch:i?function(a){e.onSearch(j,a)}:void 0,filterOption:function(e,a){return a.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:b?O.a.map(s,(function(e,a){return Object(w.jsx)(ca,{value:e.label,children:e.label},a)})):O.a.map(s,(function(e,a){return Object(w.jsx)(ca,{value:e,children:e},a)}))})]},"select-ct-wrapper-".concat(e.name))};ia.defaultProps={className:void 0,title:"",placeholder:"Select...",data:[],onChange:function(){},onSearch:function(){},showSearch:!0,defaultValue:void 0,isValueOutside:!1,mode:void 0,value:[],suffixIcon:void 0,name:"",disabled:!1,isObject:!1};var oa=ia,la=(t(312),function(e){var a=e.className,t=e.rating,n=e.onClick,r=e.isButton;return Object(w.jsx)("div",{className:p()("display-rating",a),children:r?Object(w.jsxs)(w.Fragment,{children:[O.a.map(O.a.range(t),(function(e,a){return Object(w.jsx)("button",{className:"bas-btn",onClick:function(){return n(a+1)},children:Object(w.jsx)("img",{src:na,alt:"Star ic"})},e)})),O.a.map(O.a.range(5-t),(function(e,a){return Object(w.jsx)("button",{className:"bas-btn",onClick:function(){return n(t+a+1)},children:Object(w.jsx)("img",{src:ra,alt:"Star inactive ic"})},e)}))]}):Object(w.jsxs)(w.Fragment,{children:[O.a.map(O.a.range(t),(function(e){return Object(w.jsx)("img",{src:na,alt:"Star ic",className:"mr-2"},e)})),O.a.map(O.a.range(5-t),(function(e,a){return Object(w.jsx)("img",{src:ra,alt:"Star ic",className:4-t!==e?"mr-2":""},a)}))]})})});la.defaultProps={className:"",onClick:function(){},rating:1,isButton:!1};var da=la,ua=function(e){var a=Object(n.useRef)(void 0),t=g({searchName:"",rating:0,kind:void 0,minPrice:void 0,maxPrice:void 0}),r=Object(b.a)(t,2),s=r[0],c=r[1],i=e.className,o=e.onFilterFood,l=function(e,a){c(Object(P.a)({},e,a))},d=s.searchName,u=s.rating,m=s.kind,j=s.minPrice,f=s.maxPrice;return N((function(){a.current&&clearTimeout(a.current),a.current=setTimeout((function(){o(s)}),200)}),[d,u,m,j,f]),Object(w.jsxs)("div",{className:p()("filter-block",i),children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("div",{className:"filter-block-title",children:"Search:"}),Object(w.jsx)(te,{name:"searchName",value:d,onChange:l,className:"filter-block-search"}),Object(w.jsx)("div",{className:"filter-block-star",children:"Stars:"}),Object(w.jsx)(da,{rating:u,isButton:!0,onClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e!==s.rating?c({rating:e}):c({rating:0})},className:"filter-block-star-dis"})]}),Object(w.jsxs)("div",{className:"filter-block-row",children:[Object(w.jsx)(oa,{name:"kind",value:m,onChange:l,className:"w-160",title:"Kind of food:",data:I.a.getKindOfFood()||[]}),Object(w.jsx)(oa,{name:"minPrice",value:j,onChange:l,title:"Min price:",className:"ml-48 w-160",type:"NUMBER",data:O.a.filter(Be,(function(e){return!f||e<f}))}),Object(w.jsx)(oa,{name:"maxPrice",value:f,onChange:l,title:"Max price:",className:"ml-48 w-160",type:"NUMBER",data:O.a.filter(Be,(function(e){return!j||e>j}))})]})]})};ua.defaultProps={className:"",onFilterFood:function(){}};var ma=ua,ja=(t(313),function(e){var a=e.visible,t=e.className,n=e.toggleClick,r=(e.loading,e.data),s=r.name,c=r.price,i=r.image,o=r.rating;return Object(w.jsx)(M.a,{className:"food-info-modal",visible:a,closable:!1,footer:null,destroyOnClose:!0,centered:!0,onCancel:n,children:Object(w.jsxs)("div",{className:p()("food-info-modal-wrapper",t),children:[Object(w.jsx)(U,{title:s,onClick:n}),Object(w.jsxs)("div",{className:"food-info-modal-main",children:[Object(w.jsx)("img",{src:i,alt:"Food card img"}),Object(w.jsxs)("div",{className:"fr-sb mt-16",children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b",children:"Rating:"}),Object(w.jsx)(da,{rating:o,className:"ml-4"})]}),Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b",children:"Price:"}),Object(w.jsx)("span",{className:"ml-4",children:We(c,void 0,"")})]})]})]})]})})});ja.defaultProps={className:"",data:{},loading:!1,visible:!1,toggleClick:function(){}};var fa=ja,ba=(t(314),function(e){var a=g({name:e.name,price:e.price,rating:e.rating,isBuy:e.isBuy,quantity:e.quantity||e.quantityType===Ie?_e[0]:Ae[0],quantityType:e.quantityType,visibleFoodInfo:!1}),t=Object(b.a)(a,2),n=t[0],r=t[1],s=e.className,c=e.quantityType,i=e.image,o=e.unit,l=e.onChangeCart,d=n.name,u=n.price,m=n.rating,j=n.isBuy,f=n.quantity,h=n.visibleFoodInfo;N((function(){l(n)}),[j,f]),N((function(){r({isBuy:e.isBuy})}),[e.isBuy]);var v=function(){r({isBuy:!j})},O=function(){r({visibleFoodInfo:!h})};return e.title&&"null"!==e.title||console.log({rating:m}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:p()("food-card",j&&"food-card-active",s),children:[i?Object(w.jsx)("div",{className:"food-card-img",onClick:v,children:Object(w.jsx)("img",{src:i,alt:"Food card img",className:"food-card-img-dis"})}):Object(w.jsx)("div",{className:"food-card-img",onClick:v}),Object(w.jsxs)("div",{className:"food-card-info",children:[Object(w.jsx)("div",{className:"food-card-info-name",children:d}),Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsxs)("div",{className:"food-card-info-col",children:[Object(w.jsx)("div",{className:"food-card-info-col-price",children:We(u,o)}),Object(w.jsx)(oa,{disabled:!j,name:"quantity",showSearch:!1,className:"mt-4",value:f,onChange:function(e,a){r(Object(P.a)({},e,a))},data:c===Ie?_e:Ae})]}),Object(w.jsxs)("div",{className:"food-card-info-col",children:[Object(w.jsx)(da,{rating:m,className:"food-card-info-col-rating"}),Object(w.jsx)(L.a,{className:"mt-10",onClick:O,children:"More info"})]})]})]}),j&&Object(w.jsx)("div",{className:"food-card-isbuy",children:"Buy"})]}),Object(w.jsx)(fa,{visible:h,toggleClick:O,data:{name:d,rating:m,price:u,image:i}})]})});ba.defaultProps={className:"",name:"",price:0,rating:3,isBuy:!1,quantity:void 0,quantityType:Ie,image:"",unit:"VND",onChangeCart:function(){}};var ha=ba,pa=function(e){var a=Object(n.useRef)(void 0),t=Object(n.useRef)(void 0),s=g({isShow:e.isShow}),c=Object(b.a)(s,2),i=c[0],o=c[1],l=e.className,d=e.data,u=e.title,m=e.onChangeCart,j=i.isShow;Object(n.useEffect)((function(){if(!j){var e=Object(r.findDOMNode)(a.current);je()(e).slideUp("slow")}}),[]);return Object(w.jsxs)("div",{className:p()("food-table",l),children:[Object(w.jsx)("div",{className:"food-table-title",children:Object(w.jsx)("span",{children:u})}),Object(w.jsx)("div",{ref:a,children:Object(w.jsx)("div",{className:"food-table-wrap",children:O.a.map(d,(function(e,a){return Object(w.jsx)(ha,Object(x.a)(Object(x.a)({},e),{},{onChangeCart:function(e){return m(e,u)},className:"mr-24 mt-24"}),a)}))})}),Object(w.jsx)("div",{className:"food-table-ender"}),Object(w.jsx)(L.a,{type:"link",onClick:function(){t.current&&clearTimeout(t.current),t.current=setTimeout((function(){var e=Object(r.findDOMNode)(a.current);e&&je()(e).slideToggle("slow"),o({isShow:!j})}),200)},className:"food-table-show-btn",children:j?"Hide":"Show"})]})};pa.defaultProps={className:"",data:[],title:"",onChangeCart:function(){},isShow:!1};var va=pa,Oa=function(e){var a=e.className,t=e.total,n=e.onClickBuy,r=e.onClickReset;return Object(w.jsxs)("div",{className:p()("home-total",a),children:[Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsx)("div",{className:"home-total-title",children:"Total:"}),Object(w.jsx)(L.a,{type:"primary",danger:!0,onClick:r,disabled:!t,children:"Reset cart"})]}),Object(w.jsx)("div",{className:"home-total-price",children:We(t,void 0,"")}),Object(w.jsx)(L.a,{block:!0,type:"primary",onClick:n,disabled:!t,children:"Buy now"})]})};Oa.defaultProps={className:"",total:0,onClickBuy:function(){},onClickReset:function(){}};var xa=Oa,ga=(t(315),function(e){var a=e.className;return Object(w.jsx)("div",{className:p()("loading",a),children:Object(w.jsx)("div",{className:"loader-gif"})})});ga.defaultProps={className:""};var Na=ga,ya=function(e){var a=Object(f.g)(),t=g({name:"",phone:"",address:"",notes:"",foodData:0!==I.a.getFoodData().length?I.a.getFoodData():[],arrImages:[],loading:!0,rawFoodData:0!==I.a.getFoodData().length?I.a.getFoodData():[]}),r=Object(b.a)(t,2),s=r[0],c=r[1],i=function(){var e=Object(T.a)(R.a.mark((function e(){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ke();case 3:a=e.sent,I.a.setMasterData(a),c({foodData:a,rawFoodData:a,loading:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c({loading:!1});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){i()}),[]);var o=e.className,l=(s.name,s.phone,s.address,s.notes,s.foodData),d=s.loading,u=Ve(l),m=u.cartTags,j=u.total,h=function(){var e=O.a.cloneDeep(l);O.a.forEach(e,(function(e){O.a.forEach(e.data||[],(function(e){O.a.assign(e,{isBuy:!1})}))})),I.a.setFoodData(void 0),c({foodData:e})},v=function(){a.push({pathname:"/food-order",state:l}),I.a.setFoodData(l)},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=O.a.find(l,(function(e){return e.title===a})),n=t.data,r=O.a.find(n,(function(a){return a.name===e.name}));O.a.assign(r,Object(x.a)({},e)),c({foodData:l})},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c({foodData:[]}),setTimeout((function(){var a=Ye(e,s.rawFoodData);c({foodData:O.a.cloneDeep(a)})}),1)};return Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:p()("home-body",o),children:[Object(w.jsxs)("div",{className:"home-body-toper",children:[Object(w.jsx)(ma,{onFilterFood:y}),Object(w.jsx)(xa,{className:"home-body-toper-block-3",total:j,onClickReset:h,onClickBuy:v})]}),Object(w.jsxs)("div",{className:"home-body-main",children:[0!==m.length&&Object(w.jsxs)("div",{className:"home-body-cart-tag animation-fadein-2s",children:[Object(w.jsx)("div",{className:"home-body-cart-tag-title",children:Object(w.jsx)("span",{children:"Your cart:"})}),O.a.map(m,(function(e,a){return Object(w.jsx)(ta.a,{className:"home-body-cart-tag-item",color:"orange",children:e},a)}))]}),O.a.map(l,(function(e,a){return 0!==e.data.length&&e.title&&Object(w.jsx)(va,{className:"animation-fadein-2s",title:e.title,data:e.data,onChangeCart:N,isShow:0===a},a)}))]})]}),d&&Object(w.jsx)(Na,{})]})};ya.defaultProps={className:""};var Ca=ya,wa=function(e){var a=e.className;return Object(w.jsxs)("div",{className:p()("home-footer",a),children:[Object(w.jsxs)("div",{className:"home-footer-contact",children:[Object(w.jsx)("div",{className:"b",children:"Contacts"}),Object(w.jsx)("div",{className:"mt-2",children:"tttriet1997@gmail.com"}),Object(w.jsx)("a",{href:"https://www.facebook.com/profile.php?id=100015087697713",className:"mt-2 fs-16",target:"blank",children:"Facebook"})]}),Object(w.jsxs)("div",{className:"home-footer-address",children:[Object(w.jsx)("div",{className:"b",children:"Address"}),Object(w.jsx)("div",{className:"mt-2",children:"364 C\u1ed9ng H\xf2a, Ph\u01b0\u1eddng 13, T\xe2n B\xecnh, Th\xe0nh ph\u1ed1 H\u1ed3 Ch\xed Minh"}),Object(w.jsx)("div",{className:"mt-2",children:"(+84) 819 541 897 (Zalo)"})]}),Object(w.jsx)("div",{className:"home-footer-copyright",children:"\xa9 2021 - Bosch Canteen"})]})};wa.defaultProps={className:""};var ka=wa,Ea=function(e){var a=e.className;return Object(w.jsxs)("div",{className:p()("home",a),children:[Object(w.jsx)(Ce,{}),Object(w.jsx)(Ca,{}),Object(w.jsx)(ka,{})]})};Ea.defaultProps={className:""};var Da=Ea,Sa=(t(316),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=0;return _.forEach(e,(function(e){a+=e.price*e.quantity})),We(a,void 0,"")}),Ta=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n,r=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:{},t=r.length>1&&void 0!==r[1]?r[1]:"",console.log({data:a}),n=_.map(a,(function(e){return{food_id:e.food_id,quantity:e.quantity,email:e.email,notes:t,status:"Pending"}})),console.log({sendingData:n}),e.next=7,Pe(n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pa=t(337),Fa=(t(317),function(e){var a,t,n,r,s=e.visible,c=e.type,i=e.className,o=e.icon,l=e.children,d=e.toggleClick,u=e.onClick,m=e.loading;if("CLONE_ORDER"===c)a="Clone the order",t="Are you sure want to clone this order?",n="Cancel",r="Yes";return Object(w.jsx)(M.a,{className:"modal-send-report",visible:s,closable:!1,footer:null,destroyOnClose:!0,centered:!0,children:Object(w.jsxs)("div",{className:p()("confirm-modal",i),children:[Object(w.jsxs)("div",{className:"confirm-modal-body",children:[Object(w.jsxs)("div",{className:"cl-body-row",children:[o||Object(w.jsx)(Pa.a,{className:"row-icon"}),Object(w.jsx)("div",{className:"row-title",children:Object(w.jsx)("span",{children:a})})]}),t&&Object(w.jsx)("div",{className:"cl-body-content",children:Object(w.jsx)("span",{children:t})}),l]}),Object(w.jsx)("div",{className:"confirm-modal-footer",children:Object(w.jsxs)("div",{className:"cl-footer-buttons",children:[Object(w.jsx)(L.a,{className:"mr8",onClick:d,disabled:m,children:n}),Object(w.jsx)(L.a,{type:"primary",danger:!1,onClick:u,loading:m,children:r})]})})]})})});Fa.defaultProps={className:void 0,type:"CLONE_ORDER",loading:!1,icon:void 0,visible:!1,message:"",rightBtnTitle:"",children:null,toggleClick:function(){}};var Ra=Fa,La=function(e){var a=Object(n.useRef)(void 0),t=Object(n.useRef)(void 0),s=g({visibleCloneOrder:!1,isShow:e.isShow}),c=Object(b.a)(s,2),i=c[0],o=c[1],l=e.className,d=e.data,u=e.date,m=e.fetchHistory,j=e.notes,f=e.status,h=i.visibleCloneOrder,v=i.loading,O=i.isShow;Object(n.useEffect)((function(){if(!O){var e=Object(r.findDOMNode)(a.current);je()(e).slideUp("slow")}}),[]);var x=function(){o({visibleCloneOrder:!h})},N=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({loading:!0}),e.next=3,Ta(d,j);case 3:a=e.sent,t={loading:!1},a.isSuccess?(alert("Successfully cloning order!"),_.assign(t,{visibleCloneOrder:!1}),m()):alert("Failed to clone order: ",a.message),o(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:p()("history-table",l),children:[Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Date: "}),Object(w.jsx)("span",{children:z()(u).format("HH:mm, DD/MM/YY")})]}),Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Total: "}),Object(w.jsx)("span",{children:Sa(d)})]}),Object(w.jsx)(L.a,{type:"link",onClick:function(){t.current&&clearTimeout(t.current),t.current=setTimeout((function(){var e=Object(r.findDOMNode)(a.current);e&&je()(e).slideToggle("slow"),o({isShow:!O})}),200)},children:O?"Hide":"Show"}),Object(w.jsx)(L.a,{type:"link",onClick:x,children:"Clone order"})]}),Object(w.jsxs)("div",{ref:a,children:[Object(w.jsxs)("div",{className:"fr mt-16",children:[Object(w.jsxs)("div",{className:"flex mr-64",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Status: "}),Object(w.jsx)("span",{children:f})]}),Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Notes: "}),Object(w.jsx)("span",{children:j})]})]}),Object(w.jsx)(Ee,{className:"mt-16",rowKey:"index",totalData:d,columns:[{title:"No.",dataIndex:"index"},{title:"Name",dataIndex:"name"},{title:"Price",dataIndex:"price",render:function(e){return We(e,void 0,"")}},{title:"Quantity",dataIndex:"quantity"}]})]}),Object(w.jsx)(Ra,{visible:h,toggleClick:x,onClick:N,type:"CLONE_ORDER",loading:v})]})};La.defaultProps={className:"",data:[],date:void 0,fetchHistory:function(){},status:"",notes:""};t(318),t(319);var Ia=function(e){var a=e.visible,t=e.className,n=e.toggleClick,r=(e.loading,e.data),s=r.username,c=r.email,i=r.address,o=r.phone;r.notes;return Object(w.jsx)(M.a,{className:"user-info-modal",visible:a,closable:!1,footer:null,destroyOnClose:!0,centered:!0,onCancel:n,children:Object(w.jsxs)("div",{className:p()("user-info-modal-wrapper",t),children:[Object(w.jsx)(U,{title:s,onClick:n}),Object(w.jsxs)("div",{className:"user-info-modal-main",children:[Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsx)("span",{className:"b",children:"Email:"}),Object(w.jsx)("span",{className:"ml-4",children:c})]}),Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsx)("span",{className:"b",children:"Username:"}),Object(w.jsx)("span",{className:"ml-4",children:s})]}),Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsx)("span",{className:"b",children:"Delivery:"}),Object(w.jsx)("span",{className:"ml-4",children:i})]}),Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsx)("span",{className:"b",children:"Phone number:"}),Object(w.jsx)("span",{className:"ml-4",children:o})]})]})]})})};Ia.defaultProps={className:"",data:{},loading:!1,visible:!1,toggleClick:function(){}};var Ma=Ia,_a=(t(320),function(e){var a,t,s=Object(n.useRef)(void 0),c=Object(n.useRef)(void 0),i=g({visibleUserInfo:!1,isShow:e.isShow}),o=Object(b.a)(i,2),l=o[0],d=o[1],u=e.className,m=e.data,j=e.date,f=(e.fetchHistory,e.status),h=e.notes,v=l.visibleUserInfo,O=l.loading,x=l.isShow;Object(n.useEffect)((function(){if(!x){var e=Object(r.findDOMNode)(s.current);je()(e).slideUp("slow")}}),[]);var N=function(){d({visibleUserInfo:!v})},y=((null===m||void 0===m||null===(a=m[0])||void 0===a?void 0:a.user)||{}).username;return Object(w.jsxs)("div",{className:p()("admin-order-table",u),children:[Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsxs)("div",{className:"flex w25",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Date: "}),Object(w.jsx)("span",{children:z()(j).format("HH:mm, DD/MM/YY")})]}),Object(w.jsxs)("div",{className:"flex w25",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Total: "}),Object(w.jsx)("span",{children:Ze(m)})]}),Object(w.jsx)(L.a,{type:"link",onClick:function(){c.current&&clearTimeout(c.current),c.current=setTimeout((function(){var e=Object(r.findDOMNode)(s.current);e&&je()(e).slideToggle("slow"),d({isShow:!x})}),200)},className:"w25",children:x?"Hide":"Show"}),Object(w.jsx)(L.a,{type:"link",onClick:N,className:"w25",children:y||""})]}),Object(w.jsxs)("div",{ref:s,children:[Object(w.jsxs)("div",{className:"fr mt-16",children:[Object(w.jsxs)("div",{className:"flex mr-64",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Status: "}),Object(w.jsx)("span",{children:f})]}),Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Notes: "}),Object(w.jsx)("span",{children:h})]})]}),Object(w.jsx)(Ee,{className:"mt-16",rowKey:"index",totalData:m,columns:[{title:"No.",dataIndex:"index"},{title:"Name",dataIndex:"name"},{title:"Price",dataIndex:"price",render:function(e){return We(e,void 0,"")}},{title:"Quantity",dataIndex:"quantity"}]})]}),Object(w.jsx)(Ma,{visible:v,toggleClick:N,loading:O,data:null===m||void 0===m||null===(t=m[0])||void 0===t?void 0:t.user})]})});_a.defaultProps={className:"",data:[],date:void 0,fetchHistory:function(){},isShow:!1,status:"",notes:""};var Aa=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:{},e.prev=1,e.next=4,re()({method:"POST",url:"".concat(S,"/api/foodorder/adminhistory"),data:a});case 4:return t=e.sent,e.abrupt("return",t.data);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),qa=Aa,Ua=function(e,a){var t,n,r,s;return{name:(null===e||void 0===e||null===(t=e.food)||void 0===t?void 0:t.name)||"",price:(null===e||void 0===e||null===(n=e.food)||void 0===n?void 0:n.price)||"",food_id:(null===e||void 0===e||null===(r=e.food)||void 0===r?void 0:r.id)||"",quantity:(null===e||void 0===e||null===(s=e.foodOrder)||void 0===s?void 0:s.quantity)||""}},Ba=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n,r,s,c,i,o=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>0&&void 0!==o[0]?o[0]:{},t=a.currentDate,n=a.email,r={createdAt:z()(t).toISOString(),email:n},e.next=5,qa(r);case 5:return s=e.sent,c=[],i=_.groupBy(s,(function(e){var a;return null===e||void 0===e||null===(a=e.foodOrder)||void 0===a?void 0:a.createdAt})),console.log({grouped:i}),Object.keys(i).forEach((function(e,a){var t,n,r,s,o,l,d,u,m,j,f,b,h,p,v,O,x,g=_.map(i[e],(function(e,a){return Ua(e)}));c.push({index:a,date:e,data:g,status:(null===(t=i[e])||void 0===t||null===(n=t[0])||void 0===n||null===(r=n.foodOrder)||void 0===r?void 0:r.status)||"",username:(null===(s=i[e])||void 0===s||null===(o=s[0])||void 0===o||null===(l=o.user)||void 0===l?void 0:l.username)||"",total:Ze(g),address:(null===(d=i[e])||void 0===d||null===(u=d[0])||void 0===u||null===(m=u.user)||void 0===m?void 0:m.address)||"",phone:(null===(j=i[e])||void 0===j||null===(f=j[0])||void 0===f||null===(b=f.user)||void 0===b?void 0:b.phone)||"",user:(null===(h=i[e])||void 0===h||null===(p=h[0])||void 0===p?void 0:p.user)||{},foodOrderId:(null===(v=i[e])||void 0===v||null===(O=v[0])||void 0===O||null===(x=O.foodOrder)||void 0===x?void 0:x.id)||""})})),console.log({res:s,grouped:i,orderHistory:c}),e.abrupt("return",_.orderBy(c,[function(e){return z()(e.date).valueOf()}],["desc"]));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ha=t(335),Ga=t(180),Ka=t(136),Va=t(73),Ya=function(e){var a=e.className,t=e.data,n=e.type,r=e.title,s=e.value,c=e.textClass,i=e.onChange,o=e.titleClassName,l=e.radioItemClassName,d=e.name,u=e.isObj,m=e.loading,j=e.disabled,f="mt18",b="",h=o;switch(n){case"QUESTION":f="mt8",b="question-item-normal",h="question-title";break;case"SCORE":b="score-ct",f="";break;case"BIG":b="big-margin";break;case"NONE":f="mt12",b="fw-normal"}return Object(w.jsxs)("div",{className:p()("radio-ct",a),children:[Object(w.jsx)(J,{title:r,className:h}),m?Object(w.jsx)("div",{children:Object(w.jsx)(Ga.a,{indicator:Object(w.jsx)(Va.a,{spin:!0})})}):Object(w.jsx)(Ka.a.Group,{onChange:function(e){return i(d,e.target.value)},value:s,disabled:j,children:u?O.a.map(t,(function(e,a){return Object(w.jsxs)("div",{className:p()("radio-item",l),children:[Object(w.jsx)(Ka.a,{value:e,className:p()(f,b,c,e.content?"fw-600":""),children:e.title}),e.content?Object(w.jsx)("div",{className:"radio-content",children:Object(w.jsx)("span",{children:e.content})}):null]},a)})):O.a.map(t,(function(e,a){return Object(w.jsx)(Ka.a,{value:e,children:e},e)}))})]})};Ya.defaultProps={name:"",className:"",textClass:"",titleClassName:"",radioItemClassName:"",onChange:function(){},data:[],type:"SCORE",title:"",value:void 0,isObj:!1,loading:!1,disabled:!1};var Qa=Ya,Ja=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:{},e.prev=1,e.next=4,re()({method:"PUT",url:"".concat(S,"/api/foodorder/changeorderstatus"),data:a});case 4:return t=e.sent,e.abrupt("return",t.data);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),Wa=Ja,Za=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n,r,s=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>0&&void 0!==s[0]?s[0]:"",t=s.length>1&&void 0!==s[1]?s[1]:"",n={food_id:a,status:t},e.prev=3,e.next=6,Wa(n);case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(3),e.t0;case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),Xa=(t(321),function(e){var a=g({loading:!1}),t=Object(b.a)(a,2),n=t[0],r=t[1],s=e.visible,c=e.className,i=e.data,o=e.onClose,l=e.onUpdateFoodOrder,d=i.date,u=i.status,m=i.foodOrderId,j=(i.notes,n.loading),f=function(){var a=Object(T.a)(R.a.mark((function a(t,n){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log({key:t,value:n,foodOrderId:m}),m&&n){a.next=3;break}return a.abrupt("return");case 3:return r({loading:!0}),a.prev=4,a.next=7,Za(m,n);case 7:a.sent.isSuccess&&l(O.a.assign(e.data,{status:n})),r({loading:!1}),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(4),r({loading:!1});case 15:case"end":return a.stop()}}),a,null,[[4,12]])})));return function(e,t){return a.apply(this,arguments)}}();return Object(w.jsx)(Ha.a,{title:"Food order",placement:"right",width:400,closeIcon:Object(w.jsx)(A.a,{className:"color-gray-9"}),onClose:o,visible:s,className:"food-order-drawer",maskClosable:!1,children:Object(w.jsxs)("div",{className:p()("food-order-drawer-wrapper",c),children:[Object(w.jsxs)("div",{className:"food-order-drawer-created-at",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Created at: "}),Object(w.jsx)("span",{children:z()(d).format("HH:mm, DD/MM/YY")})]}),Object(w.jsxs)("div",{className:"food-order-drawer-total",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Total: "}),Object(w.jsx)("span",{children:i.total||""})]}),Object(w.jsx)(Qa,{data:Ue,value:u,title:"Status:",titleClassName:"b pos-re",className:"mt-16 mb-16",onChange:f,loading:j,disabled:!e.isEditable}),Object(w.jsx)("div",{className:"mt-16",children:Object(w.jsx)("span",{className:"b",children:"Food list: "})}),O.a.map(i.data||[],(function(e,a){return Object(w.jsx)("div",{className:"food-order-drawer-row",children:"".concat(a+1,": ").concat(e.name," - Price: ").concat(We(e.price,void 0,"")," - Quantity: ").concat(e.quantity)},a)})),Object(w.jsxs)("div",{className:"food-order-drawer-total",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Notes: "}),Object(w.jsx)("span",{children:i.notes||""})]})]})})});Xa.defaultProps={className:"",data:{},visible:!1,toggleClick:function(){},onClose:function(){},onUpdateFoodOrder:function(){},isEditable:!0};var za=Xa,$a=(t(322),function(e){var a=e.className,t=e.cell,n="--pending";switch(t){case Ue[0]:n="--pending";break;case Ue[1]:n="--on-going";break;case Ue[2]:n="--done";break;case Ue[3]:n="--cancel"}return Object(w.jsx)("div",{className:p()("display-status",a),children:Object(w.jsx)("span",{className:n,children:t})})});$a.defaultProps={className:"",cell:""};var et=$a,at=(t(323),function(e){var a=g({visibleUserInfo:!1,isShow:e.isShow,foodOrderData:{}}),t=Object(b.a)(a,2),n=t[0],r=t[1],s=e.className,c=e.data,i=(e.date,e.fetchHistory,e.status,e.notes,n.visibleUserInfo,n.loading,n.isShow,n.foodOrderData);return Object(w.jsxs)("div",{className:p()("admin-order-table",s),children:[0===c.length?Object(w.jsx)("div",{className:"no-data",children:"There is no data to display"}):Object(w.jsx)(Ee,{className:"mt-16",rowKey:"index",totalData:c,columns:[{title:"Date",dataIndex:"date",render:function(e){return z()(e).format("HH:mm, DD/MM/YY")}},{title:"Username",dataIndex:"username"},{title:"Total",dataIndex:"total"},{title:"Address",dataIndex:"address"},{title:"Phone number",dataIndex:"phone"},{title:"Status",dataIndex:"status",render:function(e){return Object(w.jsx)(et,{cell:e})}}],onRowClick:function(e,a){console.log({rowIndex:e,record:a}),r({foodOrderData:a})}}),Object(w.jsx)(za,{visible:!O.a.isEmpty(i),data:i,onClose:function(){r({foodOrderData:{}})},onUpdateFoodOrder:function(e){r({foodOrderData:e})},isEditable:e.isEditable})]})});at.defaultProps={className:"",data:[],date:void 0,fetchHistory:function(){},isShow:!1,status:"",notes:"",isEditable:!0};var tt=at,nt=function(e){var a=g({data:[],currentDate:z()(),loading:!0}),t=Object(b.a)(a,2),r=t[0],s=t[1],c=e.className,i=r.currentDate,o=r.data,l=function(){var a=Object(T.a)(R.a.mark((function a(){var t;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,Ba({currentDate:i,email:e.email});case 5:t=a.sent,s({data:t,loading:!1}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),s({loading:!1});case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(){return a.apply(this,arguments)}}();Object(n.useEffect)((function(){l()}),[i]);return Object(w.jsxs)("div",{className:p()("customer-orders",c),children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)(ee,{className:"customer-orders-cur-date",placeholder:"Choose date",value:i,onChange:function(e,a){s(Object(P.a)({},e,a))},name:"currentDate"}),Object(w.jsx)("div",{className:"customer-orders-date",children:z()(i).format("dddd, MMMM DD, YYYY")})]}),Object(w.jsx)(tt,{data:o,isEditable:!e.email})]})};nt.defaultProps={className:"",email:void 0};var rt=nt,st=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=null===(a=I.a.getDataLogin())||void 0===a?void 0:a.email,e.next=4,re()({method:"get",url:"".concat(S,"/api/foodorder/history/").concat(t)});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ct=st,it=function(e,a){var t,n,r,s,c;return{index:a+1,name:(null===e||void 0===e||null===(t=e.food)||void 0===t?void 0:t.name)||"",price:(null===e||void 0===e||null===(n=e.food)||void 0===n?void 0:n.price)||"",food_id:(null===e||void 0===e||null===(r=e.food)||void 0===r?void 0:r.id)||"",quantity:(null===e||void 0===e||null===(s=e.foodOrder)||void 0===s?void 0:s.quantity)||"",email:null===e||void 0===e||null===(c=e.user)||void 0===c?void 0:c.email}},ot=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct();case 3:return a=e.sent,t=[],n=_.groupBy(a,(function(e){var a;return null===e||void 0===e||null===(a=e.foodOrder)||void 0===a?void 0:a.createdAt})),Object.keys(n).forEach((function(e){var a,r,s,c,i,o,l=_.map(n[e],(function(e,a){return it(e,a)}));t.push({date:e,data:l,notes:(null===(a=n[e])||void 0===a||null===(r=a[0])||void 0===r||null===(s=r.foodOrder)||void 0===s?void 0:s.notes)||"",status:(null===(c=n[e])||void 0===c||null===(i=c[0])||void 0===i||null===(o=i.foodOrder)||void 0===o?void 0:o.status)||""})})),e.abrupt("return",_.orderBy(t,[function(e){return z()(e.date).valueOf()}],["desc"]));case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),lt=(t(324),function(e){var a,t=Object(f.h)(),r=Object(f.g)(),s=g({orderHistory:Fe(t.state),loading:!0}),c=Object(b.a)(s,2),i=c[0],o=c[1],l=e.className,d=function(){var e=Object(T.a)(R.a.mark((function e(){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ot();case 3:a=e.sent,o({orderHistory:a,loading:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o({loading:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=(i.orderHistory,i.loading);return Object(n.useEffect)((function(){I.a.getToken()?d():(console.log({login:e.login,auth:I.a.getToken()}),r.push("/retail-store"),o({}))}),[e.login]),Object(w.jsxs)("div",{className:p()("history",l),children:[Object(w.jsx)(Ce,{}),Object(w.jsx)("div",{className:"history-body",children:Object(w.jsx)(rt,{email:null===(a=I.a.getDataLogin())||void 0===a?void 0:a.email})}),u&&Object(w.jsx)(Na,{})]})});lt.defaultProps={className:""};var dt=Object(c.b)((function(e){return{login:e.login}}),{})(lt),ut=t(333),mt=t(338),jt=(t(325),{image:void 0,name:"",nameErr:"",price:"",priceErr:"",title:"",titleErr:"",rating:1,quantityType:void 0,quanityTypeErr:"",id:void 0}),ft=function(e){var a=Object(n.useRef)([]),t=g(Object(x.a)({},jt)),r=Object(b.a)(t,2),s=r[0],c=r[1],i=e.className,o=e.index,l=e.onChangeFood,d=e.onDeleteFood,u=e.isAdd,m=s.image,j=s.name,f=s.nameErr,h=s.price,v=s.priceErr,O=s.title,N=s.titleErr,y=s.rating,C=s.quantityType,k=s.quanityTypeErr,E=s.id,D="".concat(u?"add":"edit","-img-id-").concat(o);Object(n.useEffect)((function(){u||(a.current=I.a.getMenu())}),[]),Object(n.useEffect)((function(){var e=_.find(a.current,(function(e){return e.id===E}));console.log({item:e}),_.isEmpty(e)||c(Object(x.a)(Object(x.a)({},e),{},{quantityType:qe[e.quantityType===Ie?0:1]}))}),[E]),Object(n.useEffect)((function(){l(o,{image:m,name:j,price:h,title:O,rating:y,quantityType:C,id:E})}),[m,j,h,O,y,C,E]);var S=function(e,a){var t;c((t={},Object(P.a)(t,e,a),Object(P.a)(t,"nameErr",""),Object(P.a)(t,"priceErr",""),Object(P.a)(t,"titleErr",""),Object(P.a)(t,"quanityTypeErr",""),t))},F=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n,r,s=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},n=null===t||void 0===t||null===(a=t.target)||void 0===a?void 0:a.files[0]){e.next=4;break}return e.abrupt("return");case 4:(r=new FileReader).readAsDataURL(n),r.onloadend=Object(T.a)(R.a.mark((function e(){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.result,c({image:a});case 2:case"end":return e.stop()}}),e)})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=document.getElementById(D);console.log({e:e}),e&&e.click()};return Object(w.jsxs)("div",{className:p()("add-food",i),children:[!u&&Object(w.jsx)(oa,{title:"Food id",name:"id",value:E,onChange:S,placeholder:"Select food id",data:_.map(I.a.getMenu(),(function(e){return e.id})),className:"mb-16"}),Object(w.jsxs)("div",{className:"add-food-row",children:[Object(w.jsxs)("div",{className:"",children:[m?Object(w.jsx)("img",{src:m,alt:"Food card img",className:"food-card-img",onClick:M}):Object(w.jsxs)("div",{className:"food-card-img",onClick:M,children:[Object(w.jsx)(mt.a,{}),Object(w.jsx)("div",{className:"food-card-img-text",children:Object(w.jsx)("span",{children:"Upload image"})})]}),Object(w.jsx)("input",{id:D,type:"file",onChange:F,className:"dis-none",accept:"image/png, .jpeg, .jpg, .webp"}),Object(w.jsx)(te,{className:"mt-16",title:"Food name",name:"name",value:j,onChange:S,placeholder:"Enter your name",errMes:f})]}),Object(w.jsxs)("div",{className:"add-food-name-price",children:[Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsx)(L.a,{danger:!0,onClick:function(){c(Object(x.a)({},jt)),l(o,{})},children:"Reset"}),0!==o&&Object(w.jsx)(L.a,{onClick:function(){d(o)},children:Object(w.jsx)(A.a,{})})]}),Object(w.jsx)(oa,{className:"mt-16",title:"Kind of quanity",name:"quantityType",value:C,onChange:S,placeholder:"Enter your quanity",errMes:k,data:qe}),Object(w.jsx)(te,{className:"mt-16",title:"Food price",name:"price",value:h,onChange:S,placeholder:"Enter your price",errMes:v,type:"NUMBER"}),Object(w.jsx)(te,{className:"mt-16",title:"Kind of food",name:"title",value:O,onChange:S,placeholder:"Enter kind of food",errMes:N}),Object(w.jsx)(J,{title:"Rating",className:"mt-16"}),Object(w.jsx)(da,{rating:y,isButton:!0,onClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e===s.rating||c({rating:e})}})]})]})]})};ft.defaultProps={className:"",index:0,data:{},onChangeFood:function(){},onDeleteFood:function(){},isAdd:!1};var bt=ft,ht=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n,r=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:{},t=r.length>1&&void 0!==r[1]&&r[1],e.prev=2,e.next=5,re()({method:t?"POST":"PUT",url:"".concat(S,"/api/canteen/").concat(t?"addfood":"updatefood"),data:a});case 5:return n=e.sent,e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(2),e.t0;case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),pt=ht,vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=e.quantityType===qe[0]?Ie:Me;return console.log({quantityType:t,x:e.quantityType===qe[0],a:e.quantityType,b:qe[0]}),{title:e.title,name:e.name,rating:e.rating,price:parseFloat(e.price),quantityType:t,image:e.image,id:a}},Ot=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t,n,r,s,c=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:[],n=c.length>1&&void 0!==c[1]&&c[1],console.log({food:t}),r={email:(null===(a=I.a.getDataLogin())||void 0===a?void 0:a.email)||"",food:O.a.map(t,(function(e){return vt(e,n?null:e.id)}))},console.log({sendingData:r}),e.next=7,pt(r,n);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xt=(t(326),function(e){var a=g({foodList:[void 0],loading:!1}),t=Object(b.a)(a,2),n=t[0],r=t[1],s=n.foodList,c=n.loading,i=e.className,o=e.isAdd,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s[e]=a,r({foodList:s})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;s.splice(e,1),console.log({onDeleteFood:s,index:e}),r({foodList:s})},u=function(){var e=Object(T.a)(R.a.mark((function e(){var a,t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({loading:!0}),e.next=3,Ot(s,o);case 3:if(a=e.sent,t={loading:!1},!a.isSuccess){e.next=13;break}return alert(o?"Successfully adding new food!":"Successfully editting food!"),e.next=9,Ke();case 9:O.a.assign(t,{foodList:[void 0]}),r({foodList:[]}),e.next=14;break;case 13:alert(o?"Failed to add new food: ":"Failed to edit food: ",a.message);case 14:setTimeout((function(){r(t)}),200);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!e||0===(null===e||void 0===e?void 0:e.length)||!e[0]||!!O.a.find(e,(function(e){return!e||!e.name||!e.price||!e.title||!e.quantityType}))}(s);return Object(w.jsxs)("div",{className:p()("add-new-food",i),children:[Object(w.jsx)("div",{className:"add-new-food-add-food",children:O.a.map(s,(function(e,a){return Object(w.jsx)(bt,{index:a,data:e,onChangeFood:l,onDeleteFood:d,className:"animation-fadein-1s",isAdd:o},a)}))}),Object(w.jsxs)("div",{className:"add-new-food-add-btns",children:[Object(w.jsx)(L.a,{type:"dashed",onClick:function(){s.push(void 0),r({foodList:s})},disabled:m||c,children:o?"New food":"Other food"}),Object(w.jsx)(L.a,{type:"primary",disabled:m,onClick:u,loading:c,children:o?"Add food":"Edit food"})]})]})});xt.defaultProps={className:"",onChangeFood:function(){},onDeleteFood:function(){},onClickAddFood:function(){},foodList:[],isAdd:!1};var gt=xt,Nt=(t(327),ut.a.TabPane),yt="ADD_FOOD",Ct="EDIT_FOOD",wt="FOOD_ORDER",kt="USER_PROFILE",Et=function(e){var a=Object(f.g)(),t=g({activeTab:kt}),r=Object(b.a)(t,2),s=r[0],c=r[1],i=e.className,o=s.activeTab,l="Admin"===I.a.getRole(),d=I.a.getDataLogin(),u=d.email,m=d.username,j=d.phone,h=d.address,v=(d.notes,d.role);Object(n.useEffect)((function(){I.a.getToken()||(a.push("/retail-store"),c({}))}),[e.login]);return Object(w.jsxs)("div",{className:p()("user",i),children:[Object(w.jsx)(Ce,{}),Object(w.jsx)("div",{className:"user-body",children:Object(w.jsxs)(ut.a,{activeKey:o,tabPosition:"top",onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c({activeTab:e})},className:"mt-12",children:[Object(w.jsx)(Nt,{tab:Object(w.jsx)("div",{className:"user-body-title",children:"User profile"}),children:Object(w.jsxs)("div",{className:"user-body-profile",children:[Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Email:"}),Object(w.jsx)("span",{children:u})]}),Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Username:"}),Object(w.jsx)("span",{children:m})]}),Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Phone:"}),Object(w.jsx)("span",{children:j})]})]}),Object(w.jsxs)("div",{className:"fr-sb",children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Address:"}),Object(w.jsx)("span",{children:h})]}),Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("span",{className:"b mr-4",children:"Role:"}),Object(w.jsx)("span",{children:v||"Customer"})]})]})]})},kt),l&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Nt,{tab:Object(w.jsx)("div",{className:"user-body-title",children:"Add food"}),children:Object(w.jsx)(gt,{isAdd:!0})},yt),Object(w.jsx)(Nt,{tab:Object(w.jsx)("div",{className:"user-body-title",children:"Edit food"}),children:Object(w.jsx)(gt,{})},Ct),Object(w.jsx)(Nt,{tab:Object(w.jsx)("div",{className:"user-body-title",children:"Food orders"}),children:Object(w.jsx)(rt,{})},wt)]})]})})]})};Et.defaultProps={className:""};var Dt=Object(c.b)((function(e){return{login:e.login}}),{})(Et),St=function(e){return Object(n.useEffect)((function(){window.onbeforeunload=function(){},window.onload=function(){e.reloadPageRequest()}}),[]),Object(w.jsx)("main",{className:"div-root",children:Object(w.jsxs)(j.a,{children:[Object(w.jsx)(E,{}),Object(w.jsxs)(f.d,{children:[Object(w.jsx)(f.b,{exact:!0,path:"/retail-store",name:"Home",component:Da}),Object(w.jsx)(f.b,{exact:!0,path:"/history",name:"Home",component:dt}),Object(w.jsx)(f.b,{exact:!0,path:"/user",name:"Home",component:Dt}),Object(w.jsx)(f.b,{exact:!0,path:"/food-order",name:"Food Order",component:aa}),Object(w.jsx)(f.a,{path:"/",to:{pathname:"/retail-store"}})]})]})})};St.defaultProps={};var Tt={reloadPageRequest:function(){return{type:D.RELOAD_PAGE_REQUEST}}},Pt=Object(c.b)((function(e){return{isLoading:e.isLoading}}),Tt)(St),Ft=(t(328),t(329),function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return Object(w.jsx)(Pt,{})}}]),t}(n.Component)),Rt=Ft,Lt=t(80),It=t(184),Mt={loading:{},login:{},bookings:[],checkins:[],foodMasterData:[]},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt.login,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case D.LOGIN_COMPLETE:return a.data;case D.LOGOUT_COMPLETE:return a;default:return e}},At=Object(Lt.b)({login:_t});var qt=function(e,a){return a.type===D.LOGOUT_REQUEST?(I.a.logout(),Mt):At(e,a)},Ut=t(97),Bt=R.a.mark(Gt),Ht=R.a.mark(Kt);function Gt(){var e,a,t,n;return R.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=!0;case 1:if(!e){r.next=12;break}return r.next=4,Object(Ut.c)(D.LOGIN_REQUEST);case 4:return a=r.sent,t=a.data,n={isSuccess:!0,user:O.a.cloneDeep(t.user),token:t.token},I.a.login(n),r.next=10,Object(Ut.b)({type:D.LOGIN_COMPLETE,data:n});case 10:r.next=1;break;case 12:case"end":return r.stop()}}),Bt)}function Kt(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ut.a)(Gt);case 2:case"end":return e.stop()}}),Ht)}var Vt=R.a.mark(Yt);function Yt(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ut.a)(Kt);case 2:case"end":return e.stop()}}),Vt)}var Qt=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(a){return}}(),Jt=function(){var e=Object(It.a)();return Object(x.a)(Object(x.a)({},Object(Lt.d)(qt,Qt,Object(Lt.a)(e))),{},{runSaga:e.run(Yt)})}();i.sessionService.initSessionService(Jt),s.a.render(Object(w.jsx)(c.a,{store:Jt,children:Object(w.jsx)(Rt,{})}),document.getElementById("root")),o()}},[[330,1,2]]]);
//# sourceMappingURL=main.e07e78af.chunk.js.map